<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
    @page {
        size: {{orientation}};
        margin: 0;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
        {{#if is_landscape}}
        width: 297mm;
        height: 210mm;
        {{else}}
        width: 210mm;
        height: 297mm;
        {{/if}}
        margin: 0;
        padding: 0;
    }
    body { 
        font-family: Arial, sans-serif; 
        font-size: 10pt; 
        color: #333; 
        padding: 15mm;
        line-height: 1.4;
    }
    .page-content {
        display: flex;
        flex-direction: column;
        {{#if is_landscape}}
        min-height: calc(210mm - 30mm);
        {{else}}
        min-height: calc(297mm - 30mm);
        {{/if}}
    }
    .content-sections {
        flex: 1;
    }
    .footer {
        margin-top: auto;
    }
    
    .header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
    }
    .title { font-size: 12pt; font-weight: bold; }
    .meta { text-align: right; font-size: 9pt; }
    
    .outlet-info {
        margin: 15px 0;
        padding: 10px;
        background: {{letterhead_fill_color}};
        border: 1px solid {{box_color}};
    }
    .outlet-name { font-weight: bold; }
    
    .date-range {
        display: flex;
        justify-content: space-between;
        margin: 10px 0;
        
    }
    
    .shift-info {
        margin: 5px 0;
        text-align: right;
    }
    
    .section {
        margin: 15px 0;
        padding-left: 15px;
        border-left: 1px solid #2c3e50;
    }
    .section-title {
        font-weight: bold;
        font-size: 10pt;
        margin-bottom: 8px;
        margin-left: -15px;
        padding: 5px 10px;
        background: #f0f0f0;
        border-bottom: 1px solid #333;
    }
    .section-content {
        padding: 10px 0;
    }
    .section-content-param {
        padding: 5px;
        line-height: 1.2;
    }
    .section-content-param .date-range {
        margin: 2px 0;
    }
    .section-content-param .shift-info {
        margin: 2px 0;
    }
    .section-content-param > div {
        margin: 2px 0;
    }
    
    table {
        width: 100%;
        border-collapse: collapse;
        margin: 5px 0;
        font-size: 10pt;
    }
    
    th {
        background: #3c4248;
        color: white;
        font-size: 9pt;
        text-align: left;
        padding: 5px 8px;
    }
    th.amount { text-align: right; }
    
    td {
        padding: 4px 8px;
        border-bottom: 1px solid #eee;
    }
    td.amount { text-align: right; }
    
    .bordered td {
        border: 1px solid #ddd;
    }
    
    tr:nth-child(even) { background: #f9f9f9; }
    
    .total-row {
        font-weight: bold;
        background: #f0f0f0 !important;
    }
    .total-row td {
        border-top: 2px solid #333;
    }
    
    .summary-table {
        width: auto;
        min-width: 300px;
    }
    .summary-table td:first-child {
        padding-right: 30px;
    }
    
    .narrow-section {
        max-width: 400px;
    }
    
    .two-column {
        display: flex;
        justify-content: space-between;
    }
    .two-column > div {
        width: 48%;
    }
    
    .highlight {
        background: #2c3e50;
        padding: 5px;
        margin: 5px 0;
    }
    
    .footer {
        margin-top: 30px;
        padding-top: 10px;
        border-top: 1px solid #ddd;
        font-size: 7pt;
        color: #666;
    }
</style>
</head>
<body>
<div class="page-content">
    <div class="header">
        <div class="title">{{title}}</div>
        <div class="meta">
            <div>Date computed: {{date_computed}}</div>
            <div>Print at: {{terminal_name}}</div>
        </div>
    </div>
    
    <div class="outlet-info">
        <div class="outlet-name">{{outlet_code}} {{outlet_name}}</div>
        {{#if outlet_name2}}<div>{{outlet_name2}}</div>{{/if}}
        <div>{{outlet_address_1}}</div>
        <div>{{outlet_address_2}}</div>
        <div>{{outlet_address_3}}</div>
        {{#if outlet_address_4}}<div>{{outlet_address_4}}</div>{{/if}}
    </div>
    
    <div >
        <div class="section-content-param">
            <div class="date-range">
                <div>FROM: {{from_date}}</div>
                <div>TO: {{to_date}}</div>
            </div>
            <div class="date-range">
                <div>Number of receipts: {{num_receipts}}</div>               
                {{#if is_shift}}<div>Shift ID: {{shift_id}}</div>{{/if}}
            </div>
        </div>
    </div>
    
    {{#if show_category}}
    <div class="section">
        <div class="section-title">TOTAL BY CATEGORY</div>
        <div class="section-content">
        <table class="summary-table">
            <thead>
                <tr>
                    <th>CATEGORY</th>
                    <th class="amount">AMOUNT</th>
                </tr>
            </thead>
            <tbody>
                {{#each categories}}
                <tr>
                    <td>{{name}}</td>
                    <td class="amount">{{amount}}</td>
                </tr>
                {{/each}}
                <tr class="total-row">
                    <td>**Total</td>
                    <td class="amount">{{total_sales}}</td>
                </tr>
            </tbody>
        </table>
        </div>
    </div>
    {{/if}}
    
    {{#if show_by_date}}
    <div class="section">
        <div class="section-title">TOTAL BY DATE</div>
        <div class="section-content">
        <table>
            <thead>
                <tr>
                    <th>DATE</th>
                    <th class="amount">GST</th>
                    <th class="amount">AMOUNT</th>
                    <th class="amount">TOTAL</th>
                </tr>
            </thead>
            <tbody>
                {{#each dates}}
                <tr>
                    <td>{{date}}</td>
                    <td class="amount">{{gst}}</td>
                    <td class="amount">{{amount}}</td>
                    <td class="amount">{{total}}</td>
                </tr>
                {{/each}}
                <tr class="total-row">
                    <td>**Total</td>
                    <td class="amount">{{dates_total_gst}}</td>
                    <td class="amount">{{dates_total_amount}}</td>
                    <td class="amount">{{dates_total}}</td>
                </tr>
            </tbody>
        </table>
        </div>
    </div>
    {{/if}}
    
    <div class="section">
        <div class="section-title">TOTAL BY PAYMENT TYPE</div>
        <div class="section-content">
        <table class="summary-table">
            <thead>
                <tr>
                    <th>PAYMENT TYPE</th>
                    <th class="amount">AMOUNT</th>
                </tr>
            </thead>
            <tbody>
                {{#each payment_types}}
                <tr>
                    <td>{{name}}</td>
                    <td class="amount">{{amount}}</td>
                </tr>
                {{/each}}
                <tr class="total-row">
                    <td>**Total Discount &amp; Rounding</td>
                    <td class="amount">{{total_discount_rounding}}</td>
                </tr>
                <tr class="total-row">
                    <td>**Total GST Collected</td>
                    <td class="amount">{{total_gst}}</td>
                </tr>
            </tbody>
        </table>
        </div>
    </div>
    
    <div class="section">
        <div class="section-title">CASH TAKEN OUT FROM DRAWER</div>
        <div class="section-content">
        <table class="summary-table">
            <thead>
                <tr>
                    <th>TYPE</th>
                    <th class="amount">AMOUNT</th>
                </tr>
            </thead>
            <tbody>
                {{#each cash_outs}}
                <tr>
                    <td>{{name}}</td>
                    <td class="amount">{{amount}}</td>
                </tr>
                {{/each}}
                <tr class="total-row">
                    <td>**Total Cash Taken Out</td>
                    <td class="amount">{{total_cash_out}}</td>
                </tr>
            </tbody>
        </table>
        </div>
    </div>
    
    <div class="section">
        <div class="section-title">SUMMARY</div>
        <div class="section-content">
        <table class="summary-table">
            <thead>
                <tr>
                    <th></th>
                    <th class="amount">AMOUNT</th>
                </tr>
            </thead>

            <tbody>
                <tr>
                    <td>Return/Cancelled</td>
                    <td class="amount">{{return_cancelled}}</td>
                </tr>
                {{#if show_starting_cash}}
                <tr>
                    <td>STARTING CASH</td>
                    <td class="amount">{{starting_cash}}</td>
                </tr>
                {{/if}}
                {{#if show_cash_in_drawer}}
                <tr>
                    <td>CASH IN DRAWER</td>
                    <td class="amount">{{cash_in_drawer}}</td>
                </tr>
                {{/if}}
                {{#if show_closing_cash}}
                <tr>
                    <td>REPORTED CLOSING CASH</td>
                    <td class="amount">{{closing_cash}}</td>
                </tr>
                {{/if}}
            </tbody>
        </table>
        </div>
    </div>
    
    {{#if show_membership}}
    <div class="section">
        <div class="section-title">MEMBERSHIP REWARDS</div>
        <div class="section-content">
        <table class="summary-table">
            <thead>
                <tr>
                    <th></th>
                    <th class="amount">POINTS</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Point Given</td>
                    <td class="amount">{{points_given}}</td>
                </tr>
                <tr>
                    <td>Point Reimbursed</td>
                    <td class="amount">{{points_reimbursed}}</td>
                </tr>
            </tbody>
        </table>
        </div>
    </div>
    {{/if}}
    
    {{#if show_by_customer}}
    <div class="section">
        <div class="section-title">TOTAL BY CUSTOMER</div>
        <div class="section-content">
        <table>
            <thead>
                <tr>
                    <th>CUSTOMER</th>
                    <th class="amount">SALES</th>
                    <th class="amount">COST</th>
                    <th class="amount">MGN</th>
                </tr>
            </thead>
            <tbody>
                {{#each customers}}
                <tr>
                    <td>{{name}}</td>
                    <td class="amount">{{sales}}</td>
                    <td class="amount">{{cost}}</td>
                    <td class="amount">{{margin}}</td>
                </tr>
                {{/each}}
                <tr class="total-row">
                    <td>Total</td>
                    <td class="amount">{{customer_total_sales}}</td>
                    <td class="amount">{{customer_total_cost}}</td>
                    <td class="amount">{{customer_total_margin}}</td>
                </tr>
            </tbody>
        </table>
        </div>
    </div>
    {{/if}}
    
    <div class="footer">
        Generated by PharmaPOS
    </div>
</div><!-- end page-content -->
</body>
</html>
